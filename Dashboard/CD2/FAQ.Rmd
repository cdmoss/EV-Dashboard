---
output:
  html_document: default
  pdf_document: default
---

```{r echo = FALSE, message=FALSE, warning=FALSE, include=FALSE}
library(tidyverse)
library(knitr)
library(kableExtra)
df = read_csv("data.csv")
```

### {.tabset}

#### Consumer {.tabset .tabset-fade .tabset-dropdown}

##### How much does an e-golf cost?

A 2019 Volkswagen E-golf starts at $36,720.

##### How much does it cost to charge the e-golf?

<br>
The Medicine Hat 2018 Utility rate was $41.55/655kWh.

Using this rate, the cost of charging from home is \$0.06/kWh, or \$2.15 for a full charge.

Public charging stations are often free, but sometimes charge a flat rate or cost per kWh that is comparable to the cost of charging at home.

##### What maintenance do electric vehicles require?

Electric vehicles don't require oil changes, fuel filter replacements, spark plug replacements or emission checks, but still will require regular maintenance of the brakes, tires, coolant and of course the battery.

##### What type of warranty does the e-golf have?

The warranty for the e-golf is as follows:

- Basic: 3 years or 60,000 km
- Battery: 8 years or 160,000 km
- Drive-Train: 5 yrs or 100,000 km
- Corrosion: 12 yrs or unlimited km
- Roadside Assistance: 3 yrs or unlimited km 
- Maintenance: 2 years or 40,000 km

##### What type of incentives come with owning an electric vehicle?

As per the iZEV program, the Canadian Federal Government will award rebates for the following amounts (pertaining to the 2019 VW E-golf):

 - \$5,000 for full purchase 
 - \$1,250 for a 12-month lease 
 - \$2,500 for a 24-month lease 
 - \$3,750 for a 36-month lease 
 
 ([list of vehicles eligible for the iZEV program](https://www.tc.gc.ca/en/services/road/innovative-technologies/list-eligible-vehicles-under-izev-program.html)).

#### Charging {.tabset .tabset-fade .tabset-dropdown}

##### How long does it take to charge on average?

There are 3 levels of charger:

- Level 1 (120V): full charge takes 8 - 12hrs

- Level 2 (240V): full charge takes 4 - 6hrs

- Level 3 (480V): full charge takes 30min

##### What are the options for home charging stations and how much do they cost?

The E-golf comes with a charger that is capable of level 2 charging from a 240V outlet.

Aftermarket charging stations from companies like Flo or ChargePoint are also available, which offer features such as faster charging than wall outlet, longer charging cord, warranty and smartphone compatibility.

##### Which chargers are compatible with the e-golf?

The E-golf supports both J1772 and CCS connectors, which allows the vehicle to be charged using level 1, 2 and 3 connectors.

[Plugshare](https://www.plugshare.com/) is a great web application that shows every charging station across the globe and allows filtering for plug designs, charging networks, payment requirements and more.

##### How much does the e-golf cost to drive ($/km)?

```{r echo = FALSE, message=FALSE, warning=FALSE}

x = 41.55/655

val = df %>% 
  mutate(cost = economy * x,
         cost = cost / 100) %>% 
  summarise(CostPerKm = mean(cost, na.rm = T) %>% scales::dollar()) %>% 
  pull(CostPerKm)
```
From our data, the average cost per km is `r val`.

#### Driving {.tabset .tabset-fade .tabset-dropdown}

##### What is the averge range of the vehicle?

```{r echo = FALSE, message=FALSE, warning=FALSE}
df %>% 
  group_by('Temperature' = cut(start_outside_temp, 5)) %>% 
  summarise(`Max Range` = max(range_start, na.rm = T) %>% round(0)) %>% 
  drop_na %>%
  mutate('Temperature' = Temperature %>% 
           str_remove("\\(") %>% 
           str_remove("\\]") %>% 
           str_replace("\\,", " to ")) %>% 
  kable() %>% 
  kable_styling()
```

##### What is regenerative braking?

The e-golf, like all other electric vehicles, uses regenerative braking, a technology that slows the vehicle down using the electric motor instead of the breaks. As the vehicle is slowed down, the extra energy is fed back into the motor and charges the vehicle battery. The brake modes (D, D1, D2, D3, B) determine how the car will slow down when coasting.

##### How fast is the e-golf?

Relevant specs of the e-golf are as follows:

Top speed: 150 km/h.

Time to accelerate from 0 - 100 km/h: 9.6 seconds

Instantaneous torque: 214 lb-ft (270 Nm)

##### What are the drive modes?

The drive modes change the way consumes power:

Normal: Uses normal drivetrain and air conditioning power consumption.

Eco: Reduces drivetrain and air condtioning power consumption to increase range. Top speed is reduced to 115 km/h.

Eco-Plus: Reduces fuel and air conditioning power consumption further than eco mode to maximize range. Top speed is reduced to 90 km/h.

##### How does temperature affect the range of the e-golf?

```{r echo = FALSE, message=FALSE, warning=FALSE}

df %>% 
  ggplot(aes(x = start_outside_temp, y = range_start)) + 
  geom_point(alpha = 0.15) + 
  geom_smooth(method = "lm", se = F) + 
  theme_minimal() + 
  theme(panel.grid = element_blank()) + 
  labs(x = "Temperature", y = "Range")

```

According to our data (shown above), the predicted range of the e-golf increases as temperature increases.

##### What is blue score?

Blue score is a feature that claims to train the owner to drive in a manner that improves economy and vehicle longevity.


